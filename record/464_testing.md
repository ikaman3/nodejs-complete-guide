464_What is "Testing"?

                                        <Code>                 "Code that tests your code"
            Manually test code -----------|-----------------| Automated code testing
Pro: Use app like your actual users              Pro: Cover all core features and run 
Con: Easy to forget a test or test too little    automatically after every code change
                                                 Con: Only tests what you define, hard to test UI

여태까지는 코드를 작성하고 페이지에 들어가거나 API에 요청을 보내는 식으로 직접 테스트했다. 가장 큰 이점은 페이지를 직접 볼 수 있다는 점이다. 사용자가 보게 되는 페이지를 미리 확인할 수 있고 개발자로서 원하는 대로 API와 상호 작용할 수 있기 때문에 매뉴얼 테스트는 아주 중요하다. 
하지만 단점도 있다. 테스트 자체를 잊어버리거나 일부분만 테스트할 수 있다. 특히 코드를 변경할 때 의도치 않게 앱의 일부분을 중단하고도 의식하지 못해서 따로 테스트하지 않을 수도 있다. 시간이 지나서 혹은 아예 오류를 잡지 못하면 문제가 될 것이다. 또한 앱의 모든 기능을 테스트하거나 코드를 변경할 때마다 테스트하기 어려우므로 테스트 자동화가 필요하다.
테스트 자동화는 코드를 테스트하는 코드를 작성하는 것이다. 실행되는 과정을 정의하고 테스트할 시나리오들을 정의해 중요한 변경 사항이 생길 때마다 자동으로 테스트를 실행하도록 설정해 원하는 대로 실행할 수 있다. 배포 과정에도 포함해서 앱이 배포되기 전에 테스트를 실행해 테스트 중 일부라도 실패하면 오류를 나타내게 할 수도 있다. 그럼 테스트를 살펴보며 오류를 찾고 고칠 수 있다.
테스트 자동화의 가장 큰 이점은 모든 핵심 기능을 살펴보고 테스트를 진행할 모든 시나리오를 정의해서 변경 사항을 만들었을 때 앱이 중지되지 않도록 한다는 것이다.
당연히 단점도 있다. 테스트하는 코드에 시나리오를 잘못 입력해서 모든 테스트에 문제가 일어나지 않는 것이다. 또한 정의해둔 부분만 테스트할 수 있고 사용자가 보는 화면을 볼 수 없어서 UI를 테스트하기 어렵다.
===========================================================================================
465_Why "Testing"?

테스트 자동화는 모든 코드를 자동으로 테스트하도록 한다. '모든' 뒤에 별표가 붙은 이유는 정의한 것에 한해 모든 코드를 테스트하기 때문이다. 작성한 테스트만 진행한다. 하지만 이론상으로는 코드가 수정될 때마다 앱의 모든 부분을 테스트할 수 있기 때문에 코드 수정 후 예상치 못한 곳에서 문제가 생기더라도 어디서 코드가 잘못됐는지 쉽게 감지한다. 특히 테스트 자동화를 통해 테스트 과정이 예상 가능하도록 분명하게 정의할 수 있다. 
이렇게 코드에 과정을 정의해두기 때문에 테스트가 항상 같은 방식으로 실행된다. 다시 말해, 항상 시나리오가 같다는 가정 아래 테스트를 진행하는 것이다. 앱을 직접 테스트하는 경우에는 지난번과 같은 과정을 반복한다고 해도 실수로 한 단계를 건너뛰는 등 완전히 동일하지 않을 수도 있다. 그래서 테스트가 필요하다.

Testing Tools & Setup

Node.js를 이용해 서버에서 뷰를 렌더링하는 페이지든, REST API, GraphQL API를 구축하든지 간에 테스트가 자동으로 실행되도록 만들어야 한다. 완성한 코드를 테스트하는 코드를 실행하기 위해서는 몇 가지 툴이 필요하다.
우선 테스트 코드를 실행하는 툴이 필요하다. 코드를 실행할 뿐만 아니라 테스트를 통과했는지 실패했는지 결과를 알려주는 툴이다. 테스트 실행에 필요한 프레임워크로는 Mocha가 유명하다. 
두 번째 툴은 코드 실행에서 나아가 충족해야 하는 일정 조건을 정의해서 특정 결과만 나오도록 한다. 특정 시나리오, 즉 테스트가 성공했는지 알려면 어떤 경우에 성공이라고 간주하는지 테스트에 정의해서 테스트 결과를 검사해야 하는데 테스트의 모든 과정에는 여러 툴이 필요하다. 이때는 Chai가 유명하다. Jest라는 대안도 있다. 
Side Effects(부작용)을 관리하고 외부 의존성이나 복잡한 시나리오를 다룰 때는 Sinon이라는 툴을 이용해 stub 및 mock를 생성한다. 
===========================================================================================